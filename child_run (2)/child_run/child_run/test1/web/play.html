<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ™ºç«¥ç§‘å¯è’™å›¢ - ç¼–ç¨‹å°æ¸¸æˆ</title>

    <link href="https://cdn.staticfile.org/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.staticfile.org/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --primary-blue: #4A90E2;
            --growth-green: #7ED321;
            --warm-yellow: #FFCE00;
            --soft-bg: #F8FBFF;
            --text-color: #4A4A4A;
        }

        body {
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
            background-color: var(--soft-bg);
            color: var(--text-color);
            scroll-behavior: smooth;
        }

        .navbar {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .navbar-brand {
            font-weight: bold;
            color: var(--primary-blue) !important;
        }

        .hero-section {
            background: linear-gradient(135deg, var(--primary-blue), var(--growth-green));
            color: white;
            padding: 60px 0;
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
        }

        .section-title {
            text-align: center;
            margin: 60px 0 40px;
            position: relative;
            padding-bottom: 15px;
        }

        .section-title::after {
            content: '';
            width: 50px;
            height: 4px;
            background: var(--warm-yellow);
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        /* æ¸¸æˆå¡ç‰‡æ ·å¼ */
        .game-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(74, 144, 226, 0.1);
            transition: all 0.3s ease;
            height: 100%;
            border: 1px solid rgba(74, 144, 226, 0.1);
            margin-bottom: 30px;
        }

        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(74, 144, 226, 0.15);
        }

        .game-header {
            background: linear-gradient(135deg, var(--primary-blue), #3a7bc8);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .game-body {
            padding: 25px;
        }

        .game-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 15px;
        }

        .game-desc {
            color: var(--text-color);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .game-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .game-tag {
            background: rgba(74, 144, 226, 0.1);
            color: var(--primary-blue);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .game-btn {
            background: linear-gradient(135deg, var(--primary-blue), #3a7bc8);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
            cursor: pointer;
        }

        .game-btn:hover {
            background: linear-gradient(135deg, #3a7bc8, var(--primary-blue));
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.3);
        }

        /* æ¸¸æˆåŒºåŸŸæ ·å¼ */
        .game-area {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            border: 2px dashed rgba(74, 144, 226, 0.2);
        }

        .game-output {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            min-height: 150px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-top: 15px;
        }

        .game-input {
            border: 2px solid var(--primary-blue);
            border-radius: 10px;
            padding: 12px;
            font-size: 16px;
            width: 100%;
            margin-top: 10px;
        }

        .game-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-run {
            background: var(--growth-green);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 600;
        }

        .btn-reset {
            background: var(--warm-yellow);
            color: #333;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 600;
        }

        /* ä»£ç ç¼–è¾‘å™¨æ ·å¼ */
        .code-editor {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 15px;
            background: #1e1e1e;
            color: #d4d4d4;
            resize: vertical;
            border: 2px solid rgba(74, 144, 226, 0.3);
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .game-card {
                margin-bottom: 25px;
            }

            .game-body {
                padding: 20px;
            }

            .hero-section {
                padding: 40px 0;
            }
        }

        /* æ¸¸æˆç‰¹å®šæ ·å¼ */
        .tic-tac-toe-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 10px;
            max-width: 300px;
            margin: 0 auto;
        }

        .tic-tac-toe-cell {
            aspect-ratio: 1;
            border: 3px solid var(--primary-blue);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            cursor: pointer;
            background: white;
            transition: all 0.2s;
        }

        .tic-tac-toe-cell:hover {
            background: rgba(74, 144, 226, 0.1);
        }

        .tic-tac-toe-cell.x {
            color: var(--primary-blue);
        }

        .tic-tac-toe-cell.o {
            color: var(--growth-green);
        }

        .calculator-display {
            background: #2d2d2d;
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.8rem;
            text-align: right;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
            min-height: 60px;
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: 10px;
        }

        .calc-btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            background: #f0f0f0;
            transition: all 0.2s;
        }

        .calc-btn:hover {
            background: #e0e0e0;
        }

        .calc-btn.operator {
            background: var(--primary-blue);
            color: white;
        }

        .calc-btn.equals {
            background: var(--growth-green);
            color: white;
        }

        .calc-btn.clear {
            background: var(--warm-yellow);
            color: #333;
        }
    </style>
</head>
<body>
<!-- å¯¼èˆªæ  -->
<nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
        <a class="navbar-brand" href="c.html">
            <i class="fas fa-lightbulb me-2"></i>æ•°æ™ºç«¥ç§‘å¯è’™å›¢
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="c.html#home">é¦–é¡µ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="c.html#videos">è§†é¢‘ç§‘æ™®</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="c.html#about">é¡¹ç›®ä»‹ç»</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="games.html">ç¼–ç¨‹æ¸¸æˆ</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- é¡µé¢æ ‡é¢˜ -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-4 fw-bold mb-4">ç¼–ç¨‹å°æ¸¸æˆ</h1>
                <p class="lead mb-4">åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¿è¡Œï¼Œæ— éœ€ä¸‹è½½å®‰è£…ï¼é€šè¿‡æœ‰è¶£çš„æ¸¸æˆå­¦ä¹ ç¼–ç¨‹æ€ç»´ï¼Œç‚¹å‡»å¼€å§‹æ¸¸æˆæŒ‰é’®å³å¯ä½“éªŒã€‚</p>
                <div class="d-flex flex-wrap justify-content-center gap-3">
                    <span class="badge bg-light text-dark px-3 py-2"><i class="fas fa-play-circle me-2"></i>åœ¨çº¿è¿è¡Œ</span>
                    <span class="badge bg-light text-dark px-3 py-2"><i class="fas fa-code me-2"></i>æ— éœ€ä¸‹è½½</span>
                    <span class="badge bg-light text-dark px-3 py-2"><i class="fas fa-graduation-cap me-2"></i>ç¼–ç¨‹å¯è’™</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- æ¸¸æˆè¿è¡ŒåŒºåŸŸ -->
<section id="gameSection" class="container py-5" style="display: none;">
    <div class="row">
        <div class="col-12">
            <h2 class="section-title" id="gameTitle">æ¸¸æˆè¿è¡ŒåŒºåŸŸ</h2>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div id="gameContainer" class="game-area">
                <!-- æ¸¸æˆå†…å®¹å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ -->
            </div>

            <div class="text-center mt-4">
                <button class="btn btn-secondary me-2" onclick="showGameList()">
                    <i class="fas fa-arrow-left me-2"></i>è¿”å›æ¸¸æˆåˆ—è¡¨
                </button>
                <button class="btn btn-outline-primary" onclick="viewCode()">
                    <i class="fas fa-code me-2"></i>æŸ¥çœ‹ä»£ç 
                </button>
            </div>
        </div>
    </div>
</section>

<!-- ä»£ç æŸ¥çœ‹æ¨¡æ€æ¡† -->
<div class="modal fade" id="codeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="codeModalTitle">æ¸¸æˆä»£ç </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <pre id="codeContent" class="p-3 bg-dark text-white rounded" style="max-height: 400px; overflow-y: auto;"></pre>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å…³é—­</button>
            </div>
        </div>
    </div>
</div>

<!-- é¡µè„š -->
<footer class="bg-dark text-white py-5 mt-5">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h5>æ•°æ™ºç«¥ç§‘å¯è’™å›¢</h5>
                <p class="text-white-50">è‡´åŠ›ä¸ºç»æµæ¬ å‘è¾¾åœ°åŒºå„¿ç«¥æä¾›æœ‰è¶£çš„è®¡ç®—æœºåŸºç¡€ç§‘æ™®æ•™è‚²</p>
            </div>
            <div class="col-md-6 text-md-end">
                <p class="mb-1">ğŸ“§ é‚®ç®±ï¼šcontact@shuzhitongke.org</p>
                <p class="mb-1">ğŸ“ åæ ‡ï¼šå±±ä¸œå¸ˆèŒƒå¤§å­¦æ–‡æ·™æ¥¼1-221</p>
            </div>
        </div>
        <hr class="bg-secondary my-4">
        <div class="text-center">
            <p class="mb-0">Â© 2025-2026 æ•°æ™ºç«¥ç§‘å¯è’™å›¢ | ç”¨å¿ƒåšç§‘æ™®ï¼Œç”¨çˆ±ä¼ èƒ½é‡</p>
        </div>
    </div>
</footer>

<script src="https://cdn.staticfile.org/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

<script>
    // å½“å‰åŠ è½½çš„æ¸¸æˆ
    let currentGame = null;

    // åŠ è½½æ¸¸æˆ
    function loadGame(gameName) {
        // éšè—æ¸¸æˆåˆ—è¡¨ï¼Œæ˜¾ç¤ºæ¸¸æˆåŒºåŸŸ
        document.querySelector('.hero-section').style.display = 'none';
        document.querySelector('.container.py-5').style.display = 'none';
        document.getElementById('gameSection').style.display = 'block';

        // æ¸…ç©ºæ¸¸æˆå®¹å™¨
        const gameContainer = document.getElementById('gameContainer');
        gameContainer.innerHTML = '';

        // è®¾ç½®æ¸¸æˆæ ‡é¢˜
        const gameTitle = document.getElementById('gameTitle');

        // æ ¹æ®æ¸¸æˆåç§°åŠ è½½ä¸åŒçš„æ¸¸æˆ
        switch(gameName) {
            case 'guessNumber':
                currentGame = 'guessNumber';
                gameTitle.textContent = 'çŒœæ•°å­—æ¸¸æˆ';
                loadGuessNumberGame();
                break;
            case 'ticTacToe':
                currentGame = 'ticTacToe';
                gameTitle.textContent = 'äº•å­—æ£‹';
                loadTicTacToeGame();
                break;
            case 'calculator':
                currentGame = 'calculator';
                gameTitle.textContent = 'ç®€æ˜“è®¡ç®—å™¨';
                loadCalculatorGame();
                break;
            case 'wordChain':
                currentGame = 'wordChain';
                gameTitle.textContent = 'å•è¯æ¥é¾™';
                loadWordChainGame();
                break;
            case 'bankSystem':
                currentGame = 'bankSystem';
                gameTitle.textContent = 'ç®€æ˜“é“¶è¡Œç³»ç»Ÿ';
                loadBankSystemGame();
                break;
            case 'rockPaperScissors':
                currentGame = 'rockPaperScissors';
                gameTitle.textContent = 'çŒœæ‹³æ¸¸æˆ';
                loadRockPaperScissorsGame();
                break;
        }

        // æ»šåŠ¨åˆ°æ¸¸æˆåŒºåŸŸ
        document.getElementById('gameSection').scrollIntoView({ behavior: 'smooth' });
    }

    // æ˜¾ç¤ºæ¸¸æˆåˆ—è¡¨
    function showGameList() {
        location.href = 'c.html#programming-games';   // å›åˆ°é¦–é¡µçš„ç¼–ç¨‹æ¸¸æˆåŒºåŸŸ
    }

    // æŸ¥çœ‹ä»£ç 
    function viewCode() {
        if (!currentGame) return;

        const codeModal = new bootstrap.Modal(document.getElementById('codeModal'));
        const codeContent = document.getElementById('codeContent');
        const codeModalTitle = document.getElementById('codeModalTitle');

        // è®¾ç½®ä»£ç å†…å®¹å’Œæ ‡é¢˜
        codeModalTitle.textContent = `${document.getElementById('gameTitle').textContent} - ä»£ç `;

        // æ ¹æ®å½“å‰æ¸¸æˆåŠ è½½å¯¹åº”çš„ä»£ç 
        let code = '';

        switch(currentGame) {
            case 'guessNumber':
                code = guessNumberCode;
                break;
            case 'ticTacToe':
                code = ticTacToeCode;
                break;
            case 'calculator':
                code = calculatorCode;
                break;
            case 'wordChain':
                code = wordChainCode;
                break;
            case 'bankSystem':
                code = bankSystemCode;
                break;
            case 'rockPaperScissors':
                code = rockPaperScissorsCode;
                break;
        }

        codeContent.textContent = code;
        codeModal.show();
    }

    // æ¸¸æˆ1: çŒœæ•°å­—æ¸¸æˆ
    function loadGuessNumberGame() {
        const gameContainer = document.getElementById('gameContainer');

        gameContainer.innerHTML = `
        <div class="text-center">
          <h4 class="mb-4">çŒœæ•°å­—æ¸¸æˆ</h4>
          <p class="mb-4">æˆ‘å·²ç»æƒ³å¥½äº†ä¸€ä¸ª1åˆ°100ä¹‹é—´çš„æ•°å­—ï¼Œè¯•è¯•çœ‹ä½ èƒ½çŒœå‡ æ¬¡çŒœä¸­ï¼</p>

          <div class="game-output" id="guessOutput">ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"æŒ‰é’®å¼€å§‹æ¸¸æˆï¼</div>

          <div class="mt-4">
            <input type="number" id="guessInput" class="game-input" placeholder="è¾“å…¥1-100ä¹‹é—´çš„æ•°å­—" min="1" max="100">
          </div>

          <div class="game-controls justify-content-center">
            <button class="btn-run" onclick="startGuessNumber()">
              <i class="fas fa-play me-2"></i>å¼€å§‹æ¸¸æˆ
            </button>
            <button class="btn-reset" onclick="resetGuessNumber()">
              <i class="fas fa-redo me-2"></i>é‡æ–°å¼€å§‹
            </button>
          </div>

          <div class="mt-4">
            <p class="text-muted"><small>ğŸ’¡ æç¤ºï¼šè¾“å…¥æ•°å­—åæŒ‰Enteré”®ä¹Ÿå¯ä»¥æäº¤çŒœæµ‹</small></p>
          </div>
        </div>
      `;

        // æ·»åŠ Enteré”®æ”¯æŒ
        document.getElementById('guessInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                makeGuess();
            }
        });
    }

    // çŒœæ•°å­—æ¸¸æˆå˜é‡
    let secretNumber = 0;
    let guessAttempts = 0;
    let gameStarted = false;

    function startGuessNumber() {
        secretNumber = Math.floor(Math.random() * 100) + 1;
        guessAttempts = 0;
        gameStarted = true;

        document.getElementById('guessOutput').innerHTML = 'æ¸¸æˆå¼€å§‹ï¼æˆ‘å·²ç»æƒ³å¥½äº†ä¸€ä¸ª1-100ä¹‹é—´çš„æ•°å­—ã€‚<br>è¯·è¾“å…¥ä½ çš„çŒœæµ‹ï¼š';
        document.getElementById('guessInput').value = '';
        document.getElementById('guessInput').focus();

        console.log('ç§˜å¯†æ•°å­—:', secretNumber); // è°ƒè¯•ç”¨
    }

    function makeGuess() {
        if (!gameStarted) {
            document.getElementById('guessOutput').innerHTML = 'è¯·å…ˆç‚¹å‡»"å¼€å§‹æ¸¸æˆ"æŒ‰é’®ï¼';
            return;
        }

        const guessInput = document.getElementById('guessInput');
        const guess = parseInt(guessInput.value);
        const output = document.getElementById('guessOutput');

        if (isNaN(guess) || guess < 1 || guess > 100) {
            output.innerHTML += '<br>è¯·è¾“å…¥1-100ä¹‹é—´çš„æœ‰æ•ˆæ•°å­—ï¼';
            guessInput.value = '';
            guessInput.focus();
            return;
        }

        guessAttempts++;

        if (guess < secretNumber) {
            output.innerHTML += `<br>ç¬¬${guessAttempts}æ¬¡çŒœæµ‹ï¼š${guess} â†’ <span class="text-primary">å¤ªå°äº†ï¼</span>`;
        } else if (guess > secretNumber) {
            output.innerHTML += `<br>ç¬¬${guessAttempts}æ¬¡çŒœæµ‹ï¼š${guess} â†’ <span class="text-primary">å¤ªå¤§äº†ï¼</span>`;
        } else {
            output.innerHTML += `<br>ç¬¬${guessAttempts}æ¬¡çŒœæµ‹ï¼š${guess} â†’ <span class="text-success fw-bold">æ­å–œï¼çŒœå¯¹äº†ï¼</span>`;
            output.innerHTML += `<br><span class="text-success">ä½ ç”¨äº† ${guessAttempts} æ¬¡çŒœä¸­äº†æ•°å­— ${secretNumber}ã€‚</span>`;
            gameStarted = false;
        }

        guessInput.value = '';
        guessInput.focus();

        // æ»šåŠ¨åˆ°è¾“å‡ºåº•éƒ¨
        output.scrollTop = output.scrollHeight;
    }

    function resetGuessNumber() {
        startGuessNumber();
    }

    // æ¸¸æˆ2: äº•å­—æ£‹
    function loadTicTacToeGame() {
        const gameContainer = document.getElementById('gameContainer');

        gameContainer.innerHTML = `
        <div class="text-center">
          <h4 class="mb-4">äº•å­—æ£‹</h4>
          <p class="mb-4">æ‚¨ä½¿ç”¨Xï¼Œè®¡ç®—æœºä½¿ç”¨Oã€‚è½®æµåœ¨3x3çš„æ ¼å­ä¸­ä¸‹æ£‹ï¼Œå…ˆè¿æˆä¸€æ¡ç›´çº¿è€…è·èƒœï¼</p>

          <div class="tic-tac-toe-board" id="ticTacToeBoard"></div>

          <div class="game-output mt-4" id="ticTacToeOutput">æ¸¸æˆå‡†å¤‡å¼€å§‹ï¼æ‚¨å…ˆèµ°ã€‚</div>

          <div class="game-controls justify-content-center mt-4">
            <button class="btn-run" onclick="startTicTacToe()">
              <i class="fas fa-play me-2"></i>å¼€å§‹æ¸¸æˆ
            </button>
            <button class="btn-reset" onclick="resetTicTacToe()">
              <i class="fas fa-redo me-2"></i>é‡æ–°å¼€å§‹
            </button>
          </div>
        </div>
      `;

        startTicTacToe();
    }

    // äº•å­—æ£‹å˜é‡
    let ticTacToeBoard = ['', '', '', '', '', '', '', '', ''];
    let currentPlayer = 'X';
    let gameActive = true;

    function startTicTacToe() {
        ticTacToeBoard = ['', '', '', '', '', '', '', '', ''];
        currentPlayer = 'X';
        gameActive = true;

        document.getElementById('ticTacToeOutput').textContent = 'æ¸¸æˆå¼€å§‹ï¼æ‚¨å…ˆèµ°ï¼ˆXï¼‰ã€‚';

        renderTicTacToeBoard();
    }

    function renderTicTacToeBoard() {
        const boardElement = document.getElementById('ticTacToeBoard');
        boardElement.innerHTML = '';

        for (let i = 0; i < 9; i++) {
            const cell = document.createElement('div');
            cell.className = `tic-tac-toe-cell ${ticTacToeBoard[i]}`;
            cell.textContent = ticTacToeBoard[i];
            cell.dataset.index = i;

            if (ticTacToeBoard[i] === '' && gameActive) {
                cell.addEventListener('click', () => handleTicTacToeCellClick(i));
            }

            boardElement.appendChild(cell);
        }
    }

    function handleTicTacToeCellClick(index) {
        if (!gameActive || ticTacToeBoard[index] !== '') return;

        // ç©å®¶ä¸‹æ£‹
        ticTacToeBoard[index] = 'X';
        renderTicTacToeBoard();

        if (checkTicTacToeWinner('X')) {
            document.getElementById('ticTacToeOutput').textContent = 'æ­å–œï¼æ‚¨èµ¢äº†ï¼';
            gameActive = false;
            return;
        }

        if (isTicTacToeBoardFull()) {
            document.getElementById('ticTacToeOutput').textContent = 'å¹³å±€ï¼æ¸¸æˆç»“æŸã€‚';
            gameActive = false;
            return;
        }

        // è®¡ç®—æœºä¸‹æ£‹
        setTimeout(() => {
            if (!gameActive) return;

            const emptyCells = ticTacToeBoard.reduce((acc, cell, idx) => {
                if (cell === '') acc.push(idx);
                return acc;
            }, []);

            if (emptyCells.length > 0) {
                const randomIndex = Math.floor(Math.random() * emptyCells.length);
                ticTacToeBoard[emptyCells[randomIndex]] = 'O';
                renderTicTacToeBoard();

                if (checkTicTacToeWinner('O')) {
                    document.getElementById('ticTacToeOutput').textContent = 'è®¡ç®—æœºèµ¢äº†ï¼å†æ¥å†å‰ï¼';
                    gameActive = false;
                } else if (isTicTacToeBoardFull()) {
                    document.getElementById('ticTacToeOutput').textContent = 'å¹³å±€ï¼æ¸¸æˆç»“æŸã€‚';
                    gameActive = false;
                }
            }
        }, 500);
    }

    function checkTicTacToeWinner(player) {
        const winPatterns = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // è¡Œ
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // åˆ—
            [0, 4, 8], [2, 4, 6] // å¯¹è§’çº¿
        ];

        return winPatterns.some(pattern =>
            pattern.every(index => ticTacToeBoard[index] === player)
        );
    }

    function isTicTacToeBoardFull() {
        return ticTacToeBoard.every(cell => cell !== '');
    }

    function resetTicTacToe() {
        startTicTacToe();
    }

    // æ¸¸æˆ3: ç®€æ˜“è®¡ç®—å™¨
    function loadCalculatorGame() {
        const gameContainer = document.getElementById('gameContainer');

        gameContainer.innerHTML = `
        <div class="text-center">
          <h4 class="mb-4">ç®€æ˜“è®¡ç®—å™¨</h4>
          <p class="mb-4">ç‚¹å‡»æŒ‰é’®è¿›è¡Œè®¡ç®—ï¼Œæ”¯æŒåŠ å‡ä¹˜é™¤è¿ç®—ã€‚</p>

          <div class="calculator-display" id="calcDisplay">0</div>

          <div class="calculator-buttons">
            <button class="calc-btn clear" onclick="clearCalculator()">C</button>
            <button class="calc-btn" onclick="appendToCalculator('/')">/</button>
            <button class="calc-btn" onclick="appendToCalculator('*')">Ã—</button>
            <button class="calc-btn" onclick="deleteLastCalculator()">âŒ«</button>

            <button class="calc-btn" onclick="appendToCalculator('7')">7</button>
            <button class="calc-btn" onclick="appendToCalculator('8')">8</button>
            <button class="calc-btn" onclick="appendToCalculator('9')">9</button>
            <button class="calc-btn operator" onclick="appendToCalculator('-')">-</button>

            <button class="calc-btn" onclick="appendToCalculator('4')">4</button>
            <button class="calc-btn" onclick="appendToCalculator('5')">5</button>
            <button class="calc-btn" onclick="appendToCalculator('6')">6</button>
            <button class="calc-btn operator" onclick="appendToCalculator('+')">+</button>

            <button class="calc-btn" onclick="appendToCalculator('1')">1</button>
            <button class="calc-btn" onclick="appendToCalculator('2')">2</button>
            <button class="calc-btn" onclick="appendToCalculator('3')">3</button>
            <button class="calc-btn equals" onclick="calculateResult()" rowspan="2">=</button>

            <button class="calc-btn" onclick="appendToCalculator('0')" colspan="2">0</button>
            <button class="calc-btn" onclick="appendToCalculator('.')">.</button>
          </div>

          <div class="game-output mt-4" id="calcOutput">ç‚¹å‡»æŒ‰é’®å¼€å§‹è®¡ç®—</div>
        </div>
      `;
    }

    // è®¡ç®—å™¨å˜é‡
    let calcDisplay = '0';
    let calcExpression = '';

    function updateCalculatorDisplay() {
        document.getElementById('calcDisplay').textContent = calcDisplay;
    }

    function appendToCalculator(value) {
        if (calcDisplay === '0' && value !== '.') {
            calcDisplay = value;
        } else {
            calcDisplay += value;
        }

        calcExpression += value;
        updateCalculatorDisplay();
    }

    function clearCalculator() {
        calcDisplay = '0';
        calcExpression = '';
        updateCalculatorDisplay();
        document.getElementById('calcOutput').textContent = 'å·²æ¸…é™¤';
    }

    function deleteLastCalculator() {
        if (calcDisplay.length > 1) {
            calcDisplay = calcDisplay.slice(0, -1);
            calcExpression = calcExpression.slice(0, -1);
        } else {
            calcDisplay = '0';
            calcExpression = '';
        }
        updateCalculatorDisplay();
    }

    function calculateResult() {
        try {
            // æ›¿æ¢Ã—ä¸º*ç”¨äºè®¡ç®—
            const expression = calcExpression.replace(/Ã—/g, '*');
            const result = eval(expression);

            if (isNaN(result) || !isFinite(result)) {
                document.getElementById('calcOutput').textContent = 'é”™è¯¯ï¼šæ— æ•ˆçš„è®¡ç®—';
            } else {
                calcDisplay = result.toString();
                calcExpression = result.toString();
                updateCalculatorDisplay();
                document.getElementById('calcOutput').textContent = `è®¡ç®—å®Œæˆï¼š${expression} = ${result}`;
            }
        } catch (error) {
            document.getElementById('calcOutput').textContent = 'é”™è¯¯ï¼šè¡¨è¾¾å¼æ— æ•ˆ';
        }
    }

    // æ¸¸æˆ4: å•è¯æ¥é¾™
    function loadWordChainGame() {
        const gameContainer = document.getElementById('gameContainer');

        gameContainer.innerHTML = `
        <div class="text-center">
          <h4 class="mb-4">å•è¯æ¥é¾™</h4>
          <p class="mb-4">è‹±æ–‡å•è¯æ¥é¾™æ¸¸æˆã€‚æ–°å•è¯çš„é¦–å­—æ¯å¿…é¡»å’Œä¸Šä¸€ä¸ªå•è¯çš„å°¾å­—æ¯ç›¸åŒã€‚</p>

          <div class="game-output" id="wordChainOutput">æ¸¸æˆå‡†å¤‡å¼€å§‹ï¼è¯·è¾“å…¥ä¸€ä¸ªè‹±æ–‡å•è¯ã€‚</div>

          <div class="mt-4">
            <input type="text" id="wordInput" class="game-input" placeholder="è¾“å…¥ä¸€ä¸ªè‹±æ–‡å•è¯">
          </div>

          <div class="game-controls justify-content-center">
            <button class="btn-run" onclick="submitWord()">
              <i class="fas fa-paper-plane me-2"></i>æäº¤å•è¯
            </button>
            <button class="btn-reset" onclick="startWordChain()">
              <i class="fas fa-redo me-2"></i>é‡æ–°å¼€å§‹
            </button>
          </div>

          <div class="mt-4">
            <p class="text-muted"><small>ğŸ’¡ æç¤ºï¼šè¾“å…¥å•è¯åæŒ‰Enteré”®ä¹Ÿå¯ä»¥æäº¤</small></p>
          </div>
        </div>
      `;

        // æ·»åŠ Enteré”®æ”¯æŒ
        document.getElementById('wordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                submitWord();
            }
        });

        startWordChain();
    }

    // å•è¯æ¥é¾™å˜é‡
    let lastWord = '';
    let wordChainHistory = [];

    function startWordChain() {
        lastWord = '';
        wordChainHistory = [];
        document.getElementById('wordChainOutput').innerHTML = 'æ¸¸æˆå¼€å§‹ï¼è¯·è¾“å…¥ä¸€ä¸ªè‹±æ–‡å•è¯ä½œä¸ºèµ·å§‹è¯ã€‚';
        document.getElementById('wordInput').value = '';
        document.getElementById('wordInput').focus();
    }

    function submitWord() {
        const wordInput = document.getElementById('wordInput');
        const word = wordInput.value.trim().toLowerCase();
        const output = document.getElementById('wordChainOutput');

        if (!word) {
            output.innerHTML += '<br>è¯·è¾“å…¥ä¸€ä¸ªå•è¯ï¼';
            return;
        }

        // æ£€æŸ¥æ˜¯å¦æ˜¯è‹±æ–‡å•è¯ï¼ˆç®€å•æ£€æŸ¥ï¼‰
        if (!/^[a-z]+$/.test(word)) {
            output.innerHTML += '<br>è¯·è¾“å…¥æœ‰æ•ˆçš„è‹±æ–‡å•è¯ï¼ˆåªåŒ…å«å­—æ¯ï¼‰ï¼';
            wordInput.value = '';
            wordInput.focus();
            return;
        }

        if (lastWord === '') {
            // ç¬¬ä¸€ä¸ªå•è¯
            lastWord = word;
            wordChainHistory.push(word);
            output.innerHTML = `èµ·å§‹å•è¯ï¼š<strong>${word}</strong><br>ç°åœ¨è½®åˆ°è®¡ç®—æœºæ¥é¾™...`;

            // è®¡ç®—æœºæ¥é¾™
            setTimeout(computerWordChain, 1000);
        } else {
            // æ£€æŸ¥æ˜¯å¦ç¬¦åˆè§„åˆ™
            const lastLetter = lastWord.charAt(lastWord.length - 1);

            if (word.charAt(0) !== lastLetter) {
                output.innerHTML += `<br>é”™è¯¯ï¼šæ–°å•è¯"${word}"å¿…é¡»ä»¥"${lastLetter}"å¼€å¤´ï¼`;
                wordInput.value = '';
                wordInput.focus();
                return;
            }

            if (wordChainHistory.includes(word)) {
                output.innerHTML += `<br>é”™è¯¯ï¼šå•è¯"${word}"å·²ç»ä½¿ç”¨è¿‡äº†ï¼`;
                wordInput.value = '';
                wordInput.focus();
                return;
            }

            // ç©å®¶å•è¯æœ‰æ•ˆ
            lastWord = word;
            wordChainHistory.push(word);
            output.innerHTML += `<br>ç©å®¶ï¼š<strong>${word}</strong>`;

            // æ£€æŸ¥ç©å®¶æ˜¯å¦èµ¢äº†ï¼ˆè®¡ç®—æœºæ— æ³•æ¥é¾™ï¼‰
            const possibleWords = getPossibleWords(lastWord.charAt(lastWord.length - 1));
            const availableWords = possibleWords.filter(w => !wordChainHistory.includes(w));

            if (availableWords.length === 0) {
                output.innerHTML += `<br><span class="text-success">æ­å–œï¼ä½ èµ¢äº†ï¼è®¡ç®—æœºæ— æ³•æ¥é¾™ã€‚</span>`;
                return;
            }

            // è®¡ç®—æœºæ¥é¾™
            setTimeout(computerWordChain, 1000);
        }

        wordInput.value = '';
        wordInput.focus();

        // æ»šåŠ¨åˆ°è¾“å‡ºåº•éƒ¨
        output.scrollTop = output.scrollHeight;
    }

    function computerWordChain() {
        const output = document.getElementById('wordChainOutput');
        const lastLetter = lastWord.charAt(lastWord.length - 1);
        const possibleWords = getPossibleWords(lastLetter);
        const availableWords = possibleWords.filter(w => !wordChainHistory.includes(w));

        if (availableWords.length === 0) {
            output.innerHTML += `<br><span class="text-success">æ­å–œï¼ä½ èµ¢äº†ï¼è®¡ç®—æœºæ— æ³•æ¥é¾™ã€‚</span>`;
            return;
        }

        // éšæœºé€‰æ‹©ä¸€ä¸ªå•è¯
        const randomIndex = Math.floor(Math.random() * availableWords.length);
        const computerWord = availableWords[randomIndex];

        lastWord = computerWord;
        wordChainHistory.push(computerWord);

        output.innerHTML += `<br>è®¡ç®—æœºï¼š<strong>${computerWord}</strong>`;

        // æ£€æŸ¥è®¡ç®—æœºæ˜¯å¦èµ¢äº†ï¼ˆç©å®¶æ— æ³•æ¥é¾™ï¼‰
        const nextPossibleWords = getPossibleWords(computerWord.charAt(computerWord.length - 1));
        const nextAvailableWords = nextPossibleWords.filter(w => !wordChainHistory.includes(w));

        if (nextAvailableWords.length === 0) {
            output.innerHTML += `<br><span class="text-danger">è®¡ç®—æœºèµ¢äº†ï¼ä½ æ— æ³•æ¥é¾™ã€‚</span>`;
        }

        // æ»šåŠ¨åˆ°è¾“å‡ºåº•éƒ¨
        output.scrollTop = output.scrollHeight;
    }

    function getPossibleWords(startLetter) {
        // ä¸€ä¸ªç®€å•çš„å•è¯åˆ—è¡¨
        const wordLists = {
            'a': ['apple', 'animal', 'about', 'after', 'again'],
            'b': ['ball', 'book', 'baby', 'blue', 'because'],
            'c': ['cat', 'car', 'cake', 'come', 'could'],
            'd': ['dog', 'day', 'door', 'does', 'different'],
            'e': ['egg', 'elephant', 'every', 'each', 'even'],
            'f': ['fish', 'flower', 'from', 'first', 'friend'],
            'g': ['game', 'girl', 'good', 'great', 'give'],
            'h': ['house', 'happy', 'have', 'how', 'here'],
            'i': ['ice', 'idea', 'into', 'if', 'important'],
            'j': ['jump', 'juice', 'just', 'job', 'joy'],
            'k': ['king', 'key', 'know', 'keep', 'kind'],
            'l': ['lion', 'like', 'love', 'look', 'little'],
            'm': ['mouse', 'mother', 'make', 'more', 'many'],
            'n': ['nose', 'name', 'not', 'now', 'new'],
            'o': ['orange', 'open', 'our', 'one', 'only'],
            'p': ['pig', 'pencil', 'play', 'people', 'part'],
            'q': ['queen', 'quick', 'question', 'quiet', 'quite'],
            'r': ['rabbit', 'red', 'run', 'right', 'really'],
            's': ['sun', 'school', 'see', 'say', 'some'],
            't': ['tree', 'tiger', 'the', 'this', 'time'],
            'u': ['umbrella', 'under', 'up', 'us', 'use'],
            'v': ['violin', 'very', 'visit', 'view', 'voice'],
            'w': ['water', 'window', 'we', 'what', 'when'],
            'x': ['xylophone', 'x-ray'],
            'y': ['yellow', 'you', 'year', 'yes', 'your'],
            'z': ['zebra', 'zoo', 'zero', 'zone']
        };

        return wordLists[startLetter] || [];
    }

    // æ¸¸æˆ5: ç®€æ˜“é“¶è¡Œç³»ç»Ÿ
    function loadBankSystemGame() {
        const gameContainer = document.getElementById('gameContainer');

        gameContainer.innerHTML = `
        <div class="text-center">
          <h4 class="mb-4">ç®€æ˜“é“¶è¡Œç³»ç»Ÿ</h4>
          <p class="mb-4">æ¨¡æ‹Ÿé“¶è¡Œç³»ç»Ÿï¼Œæ‚¨å¯ä»¥å¼€æˆ·ã€å­˜æ¬¾ã€å–æ¬¾ã€æŸ¥è¯¢ä½™é¢ã€‚</p>

          <div class="game-output" id="bankOutput">æ¬¢è¿ä½¿ç”¨ç®€æ˜“é“¶è¡Œç³»ç»Ÿï¼</div>

          <div class="row mt-4">
            <div class="col-md-6 mb-3">
              <input type="number" id="bankAmount" class="game-input" placeholder="è¾“å…¥é‡‘é¢" min="1">
            </div>
            <div class="col-md-6 mb-3">
              <input type="text" id="accountName" class="game-input" placeholder="è´¦æˆ·åç§°">
            </div>
          </div>

          <div class="game-controls justify-content-center flex-wrap">
            <button class="btn btn-primary m-1" onclick="createAccount()">å¼€æˆ·</button>
            <button class="btn btn-success m-1" onclick="deposit()">å­˜æ¬¾</button>
            <button class="btn btn-warning m-1" onclick="withdraw()">å–æ¬¾</button>
            <button class="btn btn-info m-1" onclick="checkBalance()">æŸ¥è¯¢ä½™é¢</button>
            <button class="btn btn-secondary m-1" onclick="resetBank()">é‡ç½®ç³»ç»Ÿ</button>
          </div>

          <div class="mt-4">
            <p class="text-muted"><small>ğŸ’¡ æç¤ºï¼šå…ˆåˆ›å»ºè´¦æˆ·ï¼Œç„¶åå¯ä»¥è¿›è¡Œå­˜æ¬¾ã€å–æ¬¾æ“ä½œ</small></p>
          </div>
        </div>
      `;

        resetBank();
    }

    // é“¶è¡Œç³»ç»Ÿå˜é‡
    let bankAccounts = {};
    let currentAccount = null;

    function resetBank() {
        bankAccounts = {};
        currentAccount = null;
        document.getElementById('bankOutput').innerHTML = 'é“¶è¡Œç³»ç»Ÿå·²é‡ç½®ï¼è¯·å…ˆåˆ›å»ºè´¦æˆ·ã€‚';
        document.getElementById('accountName').value = '';
        document.getElementById('bankAmount').value = '';
    }

    function createAccount() {
        const accountName = document.getElementById('accountName').value.trim();
        const output = document.getElementById('bankOutput');

        if (!accountName) {
            output.innerHTML = 'è¯·è¾“å…¥è´¦æˆ·åç§°ï¼';
            return;
        }

        if (bankAccounts[accountName]) {
            output.innerHTML = `è´¦æˆ·"${accountName}"å·²å­˜åœ¨ï¼`;
            return;
        }

        bankAccounts[accountName] = {
            name: accountName,
            balance: 0
        };

        currentAccount = accountName;
        output.innerHTML = `è´¦æˆ·"${accountName}"åˆ›å»ºæˆåŠŸï¼åˆå§‹ä½™é¢ï¼š0å…ƒã€‚`;
    }

    function deposit() {
        if (!currentAccount) {
            document.getElementById('bankOutput').innerHTML = 'è¯·å…ˆåˆ›å»ºè´¦æˆ·ï¼';
            return;
        }

        const amount = parseFloat(document.getElementById('bankAmount').value);

        if (isNaN(amount) || amount <= 0) {
            document.getElementById('bankOutput').innerHTML = 'è¯·è¾“å…¥æœ‰æ•ˆçš„å­˜æ¬¾é‡‘é¢ï¼';
            return;
        }

        bankAccounts[currentAccount].balance += amount;
        document.getElementById('bankOutput').innerHTML =
            `å­˜æ¬¾æˆåŠŸï¼å­˜å…¥${amount}å…ƒã€‚<br>è´¦æˆ·"${currentAccount}"å½“å‰ä½™é¢ï¼š${bankAccounts[currentAccount].balance}å…ƒã€‚`;

        document.getElementById('bankAmount').value = '';
    }

    function withdraw() {
        if (!currentAccount) {
            document.getElementById('bankOutput').innerHTML = 'è¯·å…ˆåˆ›å»ºè´¦æˆ·ï¼';
            return;
        }

        const amount = parseFloat(document.getElementById('bankAmount').value);

        if (isNaN(amount) || amount <= 0) {
            document.getElementById('bankOutput').innerHTML = 'è¯·è¾“å…¥æœ‰æ•ˆçš„å–æ¬¾é‡‘é¢ï¼';
            return;
        }

        if (amount > bankAccounts[currentAccount].balance) {
            document.getElementById('bankOutput').innerHTML =
                `å–æ¬¾å¤±è´¥ï¼ä½™é¢ä¸è¶³ã€‚<br>è´¦æˆ·"${currentAccount}"å½“å‰ä½™é¢ï¼š${bankAccounts[currentAccount].balance}å…ƒã€‚`;
            return;
        }

        bankAccounts[currentAccount].balance -= amount;
        document.getElementById('bankOutput').innerHTML =
            `å–æ¬¾æˆåŠŸï¼å–å‡º${amount}å…ƒã€‚<br>è´¦æˆ·"${currentAccount}"å½“å‰ä½™é¢ï¼š${bankAccounts[currentAccount].balance}å…ƒã€‚`;

        document.getElementById('bankAmount').value = '';
    }

    function checkBalance() {
        if (!currentAccount) {
            document.getElementById('bankOutput').innerHTML = 'è¯·å…ˆåˆ›å»ºè´¦æˆ·ï¼';
            return;
        }

        document.getElementById('bankOutput').innerHTML =
            `è´¦æˆ·"${currentAccount}"å½“å‰ä½™é¢ï¼š${bankAccounts[currentAccount].balance}å…ƒã€‚`;
    }

    // æ¸¸æˆ6: çŒœæ‹³æ¸¸æˆ
    function loadRockPaperScissorsGame() {
        const gameContainer = document.getElementById('gameContainer');

        gameContainer.innerHTML = `
        <div class="text-center">
          <h4 class="mb-4">çŒœæ‹³æ¸¸æˆ</h4>
          <p class="mb-4">çŸ³å¤´å‰ªåˆ€å¸ƒæ¸¸æˆã€‚æ‚¨å’Œè®¡ç®—æœºå¯¹æˆ˜ï¼Œä¸‰å±€ä¸¤èƒœã€‚</p>

          <div class="game-output" id="rpsOutput">æ¸¸æˆå‡†å¤‡å¼€å§‹ï¼è¯·é€‰æ‹©æ‚¨çš„å‡ºæ‹³ã€‚</div>

          <div class="d-flex justify-content-center gap-3 mt-4 flex-wrap">
            <button class="btn btn-primary btn-lg p-4" onclick="playRound('rock')">
              <i class="fas fa-hand-rock fa-2x mb-2"></i><br>çŸ³å¤´
            </button>
            <button class="btn btn-success btn-lg p-4" onclick="playRound('paper')">
              <i class="fas fa-hand-paper fa-2x mb-2"></i><br>å¸ƒ
            </button>
            <button class="btn btn-warning btn-lg p-4" onclick="playRound('scissors')">
              <i class="fas fa-hand-scissors fa-2x mb-2"></i><br>å‰ªåˆ€
            </button>
          </div>

          <div class="row mt-4 text-center">
            <div class="col-md-6">
              <h5>ç©å®¶</h5>
              <div class="display-4" id="playerScore">0</div>
            </div>
            <div class="col-md-6">
              <h5>è®¡ç®—æœº</h5>
              <div class="display-4" id="computerScore">0</div>
            </div>
          </div>

          <div class="game-controls justify-content-center mt-4">
            <button class="btn-run" onclick="startRockPaperScissors()">
              <i class="fas fa-play me-2"></i>å¼€å§‹æ¸¸æˆ
            </button>
            <button class="btn-reset" onclick="resetRockPaperScissors()">
              <i class="fas fa-redo me-2"></i>é‡æ–°å¼€å§‹
            </button>
          </div>
        </div>
      `;

        startRockPaperScissors();
    }

    // çŒœæ‹³æ¸¸æˆå˜é‡
    let playerScore = 0;
    let computerScore = 0;
    let roundCount = 0;

    function startRockPaperScissors() {
        playerScore = 0;
        computerScore = 0;
        roundCount = 0;

        document.getElementById('playerScore').textContent = '0';
        document.getElementById('computerScore').textContent = '0';
        document.getElementById('rpsOutput').textContent = 'æ¸¸æˆå¼€å§‹ï¼è¯·é€‰æ‹©æ‚¨çš„å‡ºæ‹³ï¼ˆçŸ³å¤´ã€å¸ƒæˆ–å‰ªåˆ€ï¼‰ã€‚';
    }

    function resetRockPaperScissors() {
        startRockPaperScissors();
    }

    function playRound(playerChoice) {
        if (playerScore >= 2 || computerScore >= 2) {
            return; // æ¸¸æˆå·²ç»“æŸ
        }

        roundCount++;

        // è®¡ç®—æœºéšæœºé€‰æ‹©
        const choices = ['rock', 'paper', 'scissors'];
        const computerChoice = choices[Math.floor(Math.random() * 3)];

        // åˆ¤æ–­èƒœè´Ÿ
        let result = '';

        if (playerChoice === computerChoice) {
            result = 'å¹³å±€ï¼';
        } else if (
            (playerChoice === 'rock' && computerChoice === 'scissors') ||
            (playerChoice === 'paper' && computerChoice === 'rock') ||
            (playerChoice === 'scissors' && computerChoice === 'paper')
        ) {
            result = 'ä½ èµ¢äº†è¿™ä¸€å±€ï¼';
            playerScore++;
        } else {
            result = 'è®¡ç®—æœºèµ¢äº†è¿™ä¸€å±€ï¼';
            computerScore++;
        }

        // æ›´æ–°æ˜¾ç¤º
        document.getElementById('playerScore').textContent = playerScore;
        document.getElementById('computerScore').textContent = computerScore;

        // ç¿»è¯‘é€‰æ‹©ä¸ºä¸­æ–‡
        const choiceMap = {
            'rock': 'çŸ³å¤´',
            'paper': 'å¸ƒ',
            'scissors': 'å‰ªåˆ€'
        };

        const playerChoiceCN = choiceMap[playerChoice];
        const computerChoiceCN = choiceMap[computerChoice];

        document.getElementById('rpsOutput').innerHTML =
            `ç¬¬${roundCount}å±€ï¼š<br>` +
            `ä½ å‡ºäº† <strong>${playerChoiceCN}</strong>ï¼Œè®¡ç®—æœºå‡ºäº† <strong>${computerChoiceCN}</strong><br>` +
            `<strong>${result}</strong>`;

        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
        if (playerScore >= 2) {
            document.getElementById('rpsOutput').innerHTML += '<br><span class="text-success fw-bold">æ­å–œï¼ä½ èµ¢äº†æ¸¸æˆï¼</span>';
        } else if (computerScore >= 2) {
            document.getElementById('rpsOutput').innerHTML += '<br><span class="text-danger fw-bold">è®¡ç®—æœºèµ¢äº†æ¸¸æˆï¼å†æ¥å†å‰ï¼</span>';
        }
    }

    // æ¸¸æˆä»£ç ï¼ˆç”¨äºä»£ç æŸ¥çœ‹ï¼‰
    const guessNumberCode = `// çŒœæ•°å­—æ¸¸æˆ - JavaScriptä»£ç 
function startGame() {
  // ç”Ÿæˆ1-100çš„éšæœºæ•°
  secretNumber = Math.floor(Math.random() * 100) + 1;
  attempts = 0;
  gameStarted = true;

  console.log('ç§˜å¯†æ•°å­—:', secretNumber); // è°ƒè¯•ç”¨
  showMessage('æ¸¸æˆå¼€å§‹ï¼æˆ‘å·²ç»æƒ³å¥½äº†ä¸€ä¸ª1-100ä¹‹é—´çš„æ•°å­—ã€‚');
}

function makeGuess(guess) {
  if (!gameStarted) {
    showMessage('è¯·å…ˆå¼€å§‹æ¸¸æˆï¼');
    return;
  }

  attempts++;

  if (guess < secretNumber) {
    showMessage(\`ç¬¬\${attempts}æ¬¡çŒœæµ‹ï¼š\${guess} â†’ å¤ªå°äº†ï¼\`);
  } else if (guess > secretNumber) {
    showMessage(\`ç¬¬\${attempts}æ¬¡çŒœæµ‹ï¼š\${guess} â†’ å¤ªå¤§äº†ï¼\`);
  } else {
    showMessage(\`ç¬¬\${attempts}æ¬¡çŒœæµ‹ï¼š\${guess} â†’ æ­å–œï¼çŒœå¯¹äº†ï¼\`);
    showMessage(\`ä½ ç”¨äº† \${attempts} æ¬¡çŒœä¸­äº†æ•°å­— \${secretNumber}ã€‚\`);
    gameStarted = false;
  }
}

// æ¸¸æˆå˜é‡
let secretNumber = 0;
let attempts = 0;
let gameStarted = false;`;

    const ticTacToeCode = `// äº•å­—æ£‹æ¸¸æˆ - JavaScriptä»£ç 
class TicTacToe {
  constructor() {
    this.board = ['', '', '', '', '', '', '', '', ''];
    this.currentPlayer = 'X';
    this.gameActive = true;
  }

  // æ¸²æŸ“æ¸¸æˆæ¿
  renderBoard() {
    const boardElement = document.getElementById('board');
    boardElement.innerHTML = '';

    for (let i = 0; i < 9; i++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.textContent = this.board[i];
      cell.dataset.index = i;

      if (this.board[i] === '' && this.gameActive) {
        cell.addEventListener('click', () => this.handleCellClick(i));
      }

      boardElement.appendChild(cell);
    }
  }

  // å¤„ç†æ ¼å­ç‚¹å‡»
  handleCellClick(index) {
    if (!this.gameActive || this.board[index] !== '') return;

    // ç©å®¶ä¸‹æ£‹
    this.board[index] = this.currentPlayer;
    this.renderBoard();

    if (this.checkWinner('X')) {
      this.showMessage('æ­å–œï¼ä½ èµ¢äº†ï¼');
      this.gameActive = false;
      return;
    }

    if (this.isBoardFull()) {
      this.showMessage('å¹³å±€ï¼æ¸¸æˆç»“æŸã€‚');
      this.gameActive = false;
      return;
    }

    // åˆ‡æ¢åˆ°è®¡ç®—æœº
    this.currentPlayer = 'O';

    // è®¡ç®—æœºä¸‹æ£‹
    setTimeout(() => this.computerMove(), 500);
  }

  // è®¡ç®—æœºç§»åŠ¨
  computerMove() {
    if (!this.gameActive) return;

    // ç®€å•AIï¼šéšæœºé€‰æ‹©ç©ºä½
    const emptyCells = this.board.reduce((acc, cell, idx) => {
      if (cell === '') acc.push(idx);
      return acc;
    }, []);

    if (emptyCells.length > 0) {
      const randomIndex = Math.floor(Math.random() * emptyCells.length);
      this.board[emptyCells[randomIndex]] = 'O';
      this.renderBoard();

      if (this.checkWinner('O')) {
        this.showMessage('è®¡ç®—æœºèµ¢äº†ï¼');
        this.gameActive = false;
      } else if (this.isBoardFull()) {
        this.showMessage('å¹³å±€ï¼æ¸¸æˆç»“æŸã€‚');
        this.gameActive = false;
      }
    }

    // åˆ‡æ¢å›ç©å®¶
    this.currentPlayer = 'X';
  }

  // æ£€æŸ¥è·èƒœè€…
  checkWinner(player) {
    const winPatterns = [
      [0, 1, 2], [3, 4, 5], [6, 7, 8], // è¡Œ
      [0, 3, 6], [1, 4, 7], [2, 5, 8], // åˆ—
      [0, 4, 8], [2, 4, 6] // å¯¹è§’çº¿
    ];

    return winPatterns.some(pattern =>
      pattern.every(index => this.board[index] === player)
    );
  }

  // æ£€æŸ¥æ¸¸æˆæ¿æ˜¯å¦å·²æ»¡
  isBoardFull() {
    return this.board.every(cell => cell !== '');
  }

  showMessage(message) {
    document.getElementById('message').textContent = message;
  }
}`;

    const calculatorCode = `// ç®€æ˜“è®¡ç®—å™¨ - JavaScriptä»£ç 
class Calculator {
  constructor() {
    this.display = '0';
    this.expression = '';
  }

  // æ›´æ–°æ˜¾ç¤º
  updateDisplay() {
    document.getElementById('display').textContent = this.display;
  }

  // æ·»åŠ æ•°å­—æˆ–è¿ç®—ç¬¦
  append(value) {
    if (this.display === '0' && value !== '.') {
      this.display = value;
    } else {
      this.display += value;
    }

    this.expression += value;
    this.updateDisplay();
  }

  // æ¸…é™¤
  clear() {
    this.display = '0';
    this.expression = '';
    this.updateDisplay();
  }

  // åˆ é™¤æœ€åä¸€ä¸ªå­—ç¬¦
  deleteLast() {
    if (this.display.length > 1) {
      this.display = this.display.slice(0, -1);
      this.expression = this.expression.slice(0, -1);
    } else {
      this.display = '0';
      this.expression = '';
    }
    this.updateDisplay();
  }

  // è®¡ç®—ç»“æœ
  calculate() {
    try {
      // æ›¿æ¢Ã—ä¸º*ç”¨äºè®¡ç®—
      const expr = this.expression.replace(/Ã—/g, '*');
      const result = eval(expr);

      if (isNaN(result) || !isFinite(result)) {
        throw new Error('æ— æ•ˆçš„è®¡ç®—');
      }

      this.display = result.toString();
      this.expression = result.toString();
      this.updateDisplay();

      return result;
    } catch (error) {
      this.display = 'é”™è¯¯';
      this.expression = '';
      this.updateDisplay();
      throw error;
    }
  }
}`;

    const wordChainCode = `// å•è¯æ¥é¾™æ¸¸æˆ - JavaScriptä»£ç 
class WordChain {
  constructor() {
    this.lastWord = '';
    this.history = [];
    this.words = {
      'a': ['apple', 'animal', 'about', 'after', 'again'],
      'b': ['ball', 'book', 'baby', 'blue', 'because'],
      'c': ['cat', 'car', 'cake', 'come', 'could'],
      // ... æ›´å¤šå•è¯
    };
  }

  // å¼€å§‹æ¸¸æˆ
  start() {
    this.lastWord = '';
    this.history = [];
    return 'æ¸¸æˆå¼€å§‹ï¼è¯·è¾“å…¥ä¸€ä¸ªè‹±æ–‡å•è¯ä½œä¸ºèµ·å§‹è¯ã€‚';
  }

  // æäº¤å•è¯
  submitWord(word) {
    const lowerWord = word.toLowerCase();

    // éªŒè¯å•è¯
    if (!/^[a-z]+$/.test(lowerWord)) {
      return 'è¯·è¾“å…¥æœ‰æ•ˆçš„è‹±æ–‡å•è¯ï¼ˆåªåŒ…å«å­—æ¯ï¼‰ï¼';
    }

    if (this.lastWord === '') {
      // ç¬¬ä¸€ä¸ªå•è¯
      this.lastWord = lowerWord;
      this.history.push(lowerWord);
      return \`èµ·å§‹å•è¯ï¼š\${word}\`;
    } else {
      // æ£€æŸ¥æ˜¯å¦ç¬¦åˆè§„åˆ™
      const lastLetter = this.lastWord.charAt(this.lastWord.length - 1);

      if (lowerWord.charAt(0) !== lastLetter) {
        return \`é”™è¯¯ï¼šæ–°å•è¯"\${word}"å¿…é¡»ä»¥"\${lastLetter}"å¼€å¤´ï¼\`;
      }

      if (this.history.includes(lowerWord)) {
        return \`é”™è¯¯ï¼šå•è¯"\${word}"å·²ç»ä½¿ç”¨è¿‡äº†ï¼\`;
      }

      // å•è¯æœ‰æ•ˆ
      this.lastWord = lowerWord;
      this.history.push(lowerWord);
      return \`ç©å®¶ï¼š\${word}\`;
    }
  }

  // è®¡ç®—æœºæ¥é¾™
  computerTurn() {
    const lastLetter = this.lastWord.charAt(this.lastWord.length - 1);
    const possibleWords = this.words[lastLetter] || [];
    const availableWords = possibleWords.filter(w => !this.history.includes(w));

    if (availableWords.length === 0) {
      return 'è®¡ç®—æœºæ— æ³•æ¥é¾™ï¼Œä½ èµ¢äº†ï¼';
    }

    // éšæœºé€‰æ‹©å•è¯
    const randomIndex = Math.floor(Math.random() * availableWords.length);
    const computerWord = availableWords[randomIndex];

    this.lastWord = computerWord;
    this.history.push(computerWord);

    return \`è®¡ç®—æœºï¼š\${computerWord}\`;
  }
}`;

    const bankSystemCode = `// ç®€æ˜“é“¶è¡Œç³»ç»Ÿ - JavaScriptä»£ç 
class BankSystem {
  constructor() {
    this.accounts = {};
    this.currentAccount = null;
  }

  // åˆ›å»ºè´¦æˆ·
  createAccount(name) {
    if (!name) {
      return 'è¯·è¾“å…¥è´¦æˆ·åç§°ï¼';
    }

    if (this.accounts[name]) {
      return \`è´¦æˆ·"\${name}"å·²å­˜åœ¨ï¼\`;
    }

    this.accounts[name] = {
      name: name,
      balance: 0
    };

    this.currentAccount = name;
    return \`è´¦æˆ·"\${name}"åˆ›å»ºæˆåŠŸï¼åˆå§‹ä½™é¢ï¼š0å…ƒã€‚\`;
  }

  // å­˜æ¬¾
  deposit(amount) {
    if (!this.currentAccount) {
      return 'è¯·å…ˆåˆ›å»ºè´¦æˆ·ï¼';
    }

    if (isNaN(amount) || amount <= 0) {
      return 'è¯·è¾“å…¥æœ‰æ•ˆçš„å­˜æ¬¾é‡‘é¢ï¼';
    }

    this.accounts[this.currentAccount].balance += amount;
    return \`å­˜æ¬¾æˆåŠŸï¼å­˜å…¥\${amount}å…ƒã€‚å½“å‰ä½™é¢ï¼š\${this.accounts[this.currentAccount].balance}å…ƒã€‚\`;
  }

  // å–æ¬¾
  withdraw(amount) {
    if (!this.currentAccount) {
      return 'è¯·å…ˆåˆ›å»ºè´¦æˆ·ï¼';
    }

    if (isNaN(amount) || amount <= 0) {
      return 'è¯·è¾“å…¥æœ‰æ•ˆçš„å–æ¬¾é‡‘é¢ï¼';
    }

    if (amount > this.accounts[this.currentAccount].balance) {
      return \`å–æ¬¾å¤±è´¥ï¼ä½™é¢ä¸è¶³ã€‚å½“å‰ä½™é¢ï¼š\${this.accounts[this.currentAccount].balance}å…ƒã€‚\`;
    }

    this.accounts[this.currentAccount].balance -= amount;
    return \`å–æ¬¾æˆåŠŸï¼å–å‡º\${amount}å…ƒã€‚å½“å‰ä½™é¢ï¼š\${this.accounts[this.currentAccount].balance}å…ƒã€‚\`;
  }

  // æŸ¥è¯¢ä½™é¢
  checkBalance() {
    if (!this.currentAccount) {
      return 'è¯·å…ˆåˆ›å»ºè´¦æˆ·ï¼';
    }

    return \`è´¦æˆ·"\${this.currentAccount}"å½“å‰ä½™é¢ï¼š\${this.accounts[this.currentAccount].balance}å…ƒã€‚\`;
  }
}`;

    const rockPaperScissorsCode = `// çŒœæ‹³æ¸¸æˆ - JavaScriptä»£ç 
class RockPaperScissors {
  constructor() {
    this.playerScore = 0;
    this.computerScore = 0;
    this.roundCount = 0;
  }

  // å¼€å§‹æ¸¸æˆ
  start() {
    this.playerScore = 0;
    this.computerScore = 0;
    this.roundCount = 0;
    return 'æ¸¸æˆå¼€å§‹ï¼è¯·é€‰æ‹©æ‚¨çš„å‡ºæ‹³ï¼ˆçŸ³å¤´ã€å¸ƒæˆ–å‰ªåˆ€ï¼‰ã€‚';
  }

  // ç©ä¸€å±€
  playRound(playerChoice) {
    this.roundCount++;

    // è®¡ç®—æœºéšæœºé€‰æ‹©
    const choices = ['rock', 'paper', 'scissors'];
    const computerChoice = choices[Math.floor(Math.random() * 3)];

    // åˆ¤æ–­èƒœè´Ÿ
    let result = '';

    if (playerChoice === computerChoice) {
      result = 'å¹³å±€ï¼';
    } else if (
      (playerChoice === 'rock' && computerChoice === 'scissors') ||
      (playerChoice === 'paper' && computerChoice === 'rock') ||
      (playerChoice === 'scissors' && computerChoice === 'paper')
    ) {
      result = 'ä½ èµ¢äº†è¿™ä¸€å±€ï¼';
      this.playerScore++;
    } else {
      result = 'è®¡ç®—æœºèµ¢äº†è¿™ä¸€å±€ï¼';
      this.computerScore++;
    }

    // ç¿»è¯‘é€‰æ‹©ä¸ºä¸­æ–‡
    const choiceMap = {
      'rock': 'çŸ³å¤´',
      'paper': 'å¸ƒ',
      'scissors': 'å‰ªåˆ€'
    };

    const playerChoiceCN = choiceMap[playerChoice];
    const computerChoiceCN = choiceMap[computerChoice];

    let message = \`ç¬¬\${this.roundCount}å±€ï¼š\`;
    message += \`ä½ å‡ºäº† \${playerChoiceCN}ï¼Œè®¡ç®—æœºå‡ºäº† \${computerChoiceCN}\`;
    message += \`<br>\${result}\`;

    // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
    if (this.playerScore >= 2) {
      message += '<br><strong>æ­å–œï¼ä½ èµ¢äº†æ¸¸æˆï¼</strong>';
    } else if (this.computerScore >= 2) {
      message += '<br><strong>è®¡ç®—æœºèµ¢äº†æ¸¸æˆï¼å†æ¥å†å‰ï¼</strong>';
    }

    return {
      message: message,
      playerScore: this.playerScore,
      computerScore: this.computerScore
    };
  }
}`;
    window.addEventListener('DOMContentLoaded', () => {
        const game = location.hash.slice(1);   // å»æ‰#å·
        if (game) {
            loadGame(game);                      // ç›´æ¥è¿è¡Œå¯¹åº”æ¸¸æˆ
        } else {
            // å¦‚æœç›´æ¥æ‰“å¼€ play.html æ²¡ç»™ hashï¼Œå°±é€€å›åˆ—è¡¨é¡µ
            location.replace('games.html');
        }
    });
</script>
</body>
</html>